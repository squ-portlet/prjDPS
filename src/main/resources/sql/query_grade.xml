<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<comment>DPS Grades Queries</comment>
	<entry key="dps.grades.select.student.grades">
				SELECT
                  DISTINCT
			            	GRADES.L_ABR_CRSNO                                          AS    L_ABR_CRSNO
			         	,  	DECODE (
			                     :paramLocale
			                     , 'ar', A_CRSSNM
			                     , CRS.CRSSNM
			                    )                                                 		AS      COURSE_NAME 
               			,  GRADES.SECTNO                                             	AS      SECTION_NO
			         	,  GRADES.GRADECD                                            	AS      GRADE_CODE
			         	,  DECODE
			                  (
			                    :paramLocale
			                    , 'ar', GV.A_ABR_GVAL
			                    ,      GV.L_ABR_GVAL
			                  )                                                   		AS      GRADE
                , (
                    SELECT 
                          COUNT(SCHEDW.FACSURNMCD)
                    FROM 
                            SCHED_WEEKLY        SCHEDW
                          , SECT_DAGR           SECTDGR
                    WHERE
                              SCHEDW.SECTCD= SECTDGR.SECTCD 
                          AND SCHEDW.FACSURNMCD = :paramEmpNo
                          AND SECTDGR.CCYRCD = :paramYear
                          AND SECTDGR.SEMCD = :paramSem
                          AND SECTDGR.L_ABR_CRSNO = GRADES.L_ABR_CRSNO
                )                                                               AS EMP_COUNT
                  
			            
			FROM
			           GRADE_VAL           GV
			        ,  STD_GRADES          GRADES
			        ,  CRS_BASIC           CRS

           		,  V_STDINFO_PORTAL    VSP
			         
			WHERE
			
                	VSP.STD_ID = :paramStdId
			      	AND GRADES.CCYRCD=:paramYear
			     	AND GRADES.SEMCD=:paramSem
            	AND GRADES.STDNO = VSP.STDNO
            	AND VSP.ACTIVE  = 'Y'
			    AND GV.GRADECD  = GRADES.GRADECD
			    AND CRS.CRSNO = GRADES.CRSNO	

            	AND (
                		GRADES.L_ABR_CRSNO  = :paramLAbrCrsNo
                		OR :paramLAbrCrsNo IS NULL
               		)
	</entry>
	<entry key="dps.grades.update.grade">
		UPDATE
		      STD_GRADES
		      SET GRADECD = :paramGradeCode
		WHERE
		           STDNO = :paramStdNo
		      AND CCYRCD=:paramYear
		      AND SEMCD=:paramSem
		      AND L_ABR_CRSNO = :paramCourseLAbrCode	
	
	</entry>

</properties>