<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <comment>DPS Postponement Queries</comment>
    <entry key="dps.postpone.select.postpone.reasons">
    	SELECT 
			CODE.SISCODECD										AS		SISCODECD	
			,DECODE 
					(
					  :paramLocale,
					  'en', CODE.CODENM, CODE.A_CODENM
					)     										AS		POSTPONE_REASON_NAME
		FROM 
		    SIS_CODES CODE,
        	SIS_CODE_TYPES CODE_TYPE
		WHERE
        		CODE.SISCODETYPCD = CODE_TYPE.SISCODETYPCD
		    AND CODE_TYPE.SISCODETYPNM = 'PST_REASON'
    </entry>
    
    <entry key="dps.postpone.insert.student">
		INSERT INTO STD_POSTPONE
		(
			  STDNO 
			, STDSTATCD 
			, FROMCCYRCD 
			, FROMSEMCD 
			, TOCCYRCD 
			, TOSEMCD 
			, PSTREASONCD 
			, OTHER_REASON 
			, POSTREQ_STATUSCD 
			, CREATE_DATE 
			, CREATE_USERNAME 
		)
		VALUES 
		(
			  :paramStdNo
			, :paramStdStatCode
			, :paramFromYearCode
			, :paramFromSemCode
			, :paramToYearCode
			, :paramToSemCode
			, :paramPostponeReasonCode
			, :paramPostponeReasonOther
			, (
				SELECT
					CODES.SISCODECD	
				FROM
						SIS_CODES       CODES
					,   SIS_CODE_TYPES  TYPES
				WHERE
						CODES.SISCODETYPCD =  TYPES.SISCODETYPCD
					AND TYPES.SISCODETYPNM = 'APPROVAL_STATUS'
					AND CODES.L_ABR_CODE  = :paramPostponeStatusCode
			   )
			, SYSDATE
			, :paramUserCode 
		)    
    </entry>
</properties>